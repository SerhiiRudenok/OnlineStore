{% extends 'myapp/template.html' %}
{% load static %}

{% block title %} Усі товари {% endblock %}

{% block content %}
    <div class="page-container">
        <div class="content-b">
            <h2 class="main-heading text-center">Усі товари</h2>

            <form method="get" class="filter-form">
                <div class="filter-group">
                    <label for="category" class="filter-label">Категорія:</label>
                    <select name="category" id="category" class="filter-select" onchange="this.form.submit()">
                        <option value="">Всі категорії</option>
                        {% for cat in categories %}
                            <option value="{{ cat.id }}" {% if cat.id == selected_category %}selected{% endif %}>
                                {{ cat.name }}
                            </option>
                        {% endfor %}
                    </select>
                </div>

                <div class="filter-group">
                    <label for="sort" class="filter-label">Сортування:</label>
                    <select name="sort" id="sort" class="filter-select" onchange="this.form.submit()">
                        <option value="">Без сортування</option>
                        <option value="price_asc" {% if selected_sort == 'price_asc' %}selected{% endif %}>Від дешевих до дорогих</option>
                        <option value="price_desc" {% if selected_sort == 'price_desc' %}selected{% endif %}>Від дорогих до дешевих</option>
                    </select>
                </div>
            </form>
            <br>
            <div class="category-grid">
                {% for category in categories %}
                <div class="category-block" data-category-id="{{ category.id }}">
                    <h3 class="category-title">{{ category.name }}</h3>
                    <ul class="product-list-simple">
                        {% for product in products %}
                            {% if product.category.id == category.id %}
                                <li class="product-item-simple">
                                    <a href="{% url 'product_detail' pk=product.id %}" class="product-link-simple">
                                        {{ product.name }}
                                    </a>
                                </li>
                            {% endif %}
                        {% endfor %}
                    </ul>
                </div>
                {% endfor %}
            </div>

            {% if not products %}
                <p class="empty-message text-center">Немає товарів за обраними параметрами.</p>
            {% endif %}
        </div>
    </div>
{% endblock %}